<?xml version='1.1' encoding='UTF-8'?>
<flow-definition plugin="workflow-job@2.32">
  <actions>
    <org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobAction plugin="pipeline-model-definition@1.3.8"/>
  </actions>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <com.sonyericsson.rebuild.RebuildSettings plugin="rebuild@1.31">
      <autoRebuild>false</autoRebuild>
      <rebuildDisabled>false</rebuildDisabled>
    </com.sonyericsson.rebuild.RebuildSettings>
  </properties>
  <definition class="org.jenkinsci.plugins.workflow.cps.CpsFlowDefinition" plugin="workflow-cps@2.68">
    <script>pipeline {
  agent { label &apos;general-build&apos; }
  stages {
    stage(&apos;Cloning Git&apos;) {
      steps {
        sh &apos;sudo rm -rf sentry-docker-compose&apos;
        sh &apos;git clone https://github.com/yhirano55/sentry-docker-compose.git&apos;
      }
    }
    stage(&apos;Building image&apos;) {
      steps{
        sh &quot;&quot;&quot;
        sudo service docker restart
        cd sentry-docker-compose
        sudo cp .env.sample .env
        seckey=\$(sudo docker-compose run --rm sentry config generate-secret-key)
        sudo echo &quot;SENTRY_SECRET_KEY=\$seckey&quot; | sudo tee -a .variables &gt; /dev/null
        sudo echo &quot;Y jacek.hewko@gmail.com testpass testpass y&quot; | sudo docker-compose run --rm sentry upgrade
        sudo docker-compose up -d
        &quot;&quot;&quot;
      }
    }
    stage(&apos;Deploy Image&apos;) {
      steps{
        echo &quot;test&quot;
      }
    }
    stage(&apos;Remove Unused docker image&apos;) {
      steps{
        echo &quot;test&quot;
      }
    }
  }
}</script>
    <sandbox>true</sandbox>
  </definition>
  <triggers/>
  <disabled>false</disabled>
</flow-definition>